<?xml version="1.0" encoding="UTF-8" standalone="no"?><map version="0.8.1"><node CREATED="1426313319787" ID="3nlqt5g59jnb9u6t3rk5r5lfo7" MODIFIED="1426313319787" TEXT="10.源的继承"><node CREATED="1426313319787" ID="79okgrkdgn1lq4ou5musporn5t" MODIFIED="1426313319787" POSITION="right" TEXT="about:blank页面的源继承"><node CREATED="1426313319787" ID="1rfq8nf3tb2ll382fj2be98ibe" MODIFIED="1426313319787" TEXT="可以创建一个最小的DOM层级对象，父级页面可在其中写入任意数据"/><node CREATED="1426313319787" ID="0983g5s3v75jt49h7hm8dpbfkh" MODIFIED="1426313319787" TEXT="场景"><node CREATED="1426313319787" ID="75a2e686lb3181vh26ufgeum2n" MODIFIED="1426313319787" TEXT="大多数情况下，会创建一个新页面，继承了发起页的SOP源"/><node CREATED="1426313319787" ID="0parvgqq9k1hil3ltejv7atc3o" MODIFIED="1426313319787" TEXT="手工输入，书签选择，手势打开，对应一个独一无二的合成源，这种about:blank不能被别的页面访问了"/><node CREATED="1426313319787" ID="2trho0apt03p8udlt3mke273b1" MODIFIED="1426313319787" TEXT="Location或Refresh重定向到about:blank页面"><node CREATED="1426313319787" ID="2sup6qhcl5p1m954k61nejha1j" MODIFIED="1426313319787" TEXT="Firefox和Webkit内核"><node CREATED="1426313319787" ID="3gs79723dl0t5hhm0iam7aotqi" MODIFIED="1426313319787" TEXT="产生一个独一无二的不可访问的源"/></node><node CREATED="1426313319788" ID="7jv6q0d50bv6pfr27e9nb2dbla" MODIFIED="1426313319788" TEXT="IE"><node CREATED="1426313319788" ID="2p26ou6imm2kfvb43tjbp12m46" MODIFIED="1426313319788" TEXT="如果新页面是在&lt;iframe&gt;子框架里，可以被父级页面访问到"/><node CREATED="1426313319788" ID="0pqgeoabjrocfuhovgtjp93crb" MODIFIED="1426313319788" TEXT="如果是新窗口，则无法访问"/></node><node CREATED="1426313319788" ID="7bhmcbosa817ni3cj42bi6vge7" MODIFIED="1426313319788" TEXT="Opera"><node CREATED="1426313319788" ID="09qgnb617poba761tvu1jkae77" MODIFIED="1426313319788" TEXT="Refresh过来的不能访问"/><node CREATED="1426313319788" ID="0q6fujsa9fvfa5n1hbou1asb26" MODIFIED="1426313319788" TEXT="Location的可以"/></node></node></node><node CREATED="1426313319788" ID="7dsjc2961e3qsj5j6k752p8d71" MODIFIED="1426313319788" TEXT="总结表格"/></node><node CREATED="1426313319788" ID="3pt37dggrm2nhncvdlilclr2mt" MODIFIED="1426313319788" POSITION="right" TEXT="data:URL的继承"><node CREATED="1426313319788" ID="504vdb6nearuu0995sf59cr4a3" MODIFIED="1426313319788" TEXT="data:的用途"><node CREATED="1426313319788" ID="3se9jdpne3ooru0v38lnc3amom" MODIFIED="1426313319788" TEXT="嵌入像图标这样的小文件"/></node><node CREATED="1426313319788" ID="6rtqal1h2mrq7nggn38lmnnka9" MODIFIED="1426313319788" TEXT="问题"><node CREATED="1426313319788" ID="6umc6q99d18d6l38qsn7atlt18" MODIFIED="1426313319788" TEXT="有些插件系统是根据插件小程序自身的URL，来判断赋予怎样的执行权限"/></node><node CREATED="1426313319788" ID="2s56vh0i0s7u6ei5k32tfpd0at" MODIFIED="1426313319788" TEXT="各浏览器表现"><node CREATED="1426313319788" ID="6lb70vg5vbh7gr9pv79hbe4ls6" MODIFIED="1426313319788" TEXT="Webkit"><node CREATED="1426313319788" ID="7e6vcq4ldcdv9e44r9gh9lo5ho" MODIFIED="1426313319788" TEXT="所有data:页面享有独一无二不可访问的源，也不会从父级页面继承源的信息"/></node><node CREATED="1426313319788" ID="0cul8lje9jc0nq1tacdrfj73kr" MODIFIED="1426313319788" TEXT="Firefox"><node CREATED="1426313319788" ID="2tr8dv2gme3q1cktrlnnbiqgcm" MODIFIED="1426313319788" TEXT="类似about:blank"/><node CREATED="1426313319788" ID="51cc8307c9v879b08kr2alt4if" MODIFIED="1426313319788" TEXT="手工输入或书签访问时，会继承这次浏览动作发起时所在页面的源信息"/></node><node CREATED="1426313319788" ID="7gh9mqj95knjn1pi4h9ib71lj0" MODIFIED="1426313319788" TEXT="Opera"><node CREATED="1426313319788" ID="62gkepm33g4kjcgd01ah06ufci" MODIFIED="1426313319788" TEXT="本书写成时，所有data:URL共享一个空白的源，也可以被父级页面访问到"/><node CREATED="1426313319788" ID="09lokuh5j9o3qvqvs73a9et4f7" MODIFIED="1426313319788" TEXT="问题"><node CREATED="1426313319788" ID="5keei3n3btjq2fj226mjc3p6ki" MODIFIED="1426313319788" TEXT="导致从无关页面创建出来的框架，可以实现跨域访问"/></node></node><node CREATED="1426313319788" ID="3i62knbtdrk54kumrsg5f0dhi9" MODIFIED="1426313319788" TEXT="IE"><node CREATED="1426313319788" ID="477kv8crb8o3ikoe82k0tj8rpi" MODIFIED="1426313319788" TEXT="IE8之前不支持data:URL"/><node CREATED="1426313319788" ID="0l4vaucmvn502o9eojjclun44s" MODIFIED="1426313319788" TEXT="IE8和9里特定类型的子资源才可以使用这个协议，并且不能用于跳转"/></node></node><node CREATED="1426313319788" ID="51nn3aljlsc5kuagbmu04sapt2" MODIFIED="1426313319788" TEXT="总结表格"/></node><node CREATED="1426313319788" ID="667cnh41chgor2mo2hcs1pudjh" MODIFIED="1426313319788" POSITION="right" TEXT="javascript:和vbscript:URL对源的继承"><node CREATED="1426313319788" ID="3df5j03f84ag7nc5pc4gcf3pst" MODIFIED="1426313319788" TEXT="机制"><node CREATED="1426313319788" ID="7g5ae9a8if8o0hgfj1rjifsp7p" MODIFIED="1426313319788" TEXT="用这种URL机制加载某些类型的子资源时，会在加载这个URL的页面里，以该页面的上下文权限执行相应的脚本代码"/></node><node CREATED="1426313319788" ID="44ejh5vebujf9lu11hfsffcddu" MODIFIED="1426313319788" TEXT="浏览器处理"><node CREATED="1426313319788" ID="51l68eseonuvmluscejrt3013p" MODIFIED="1426313319788" TEXT="非同源"><node CREATED="1426313319789" ID="02bcqtonmql125m7slrgtun3vb" MODIFIED="1426313319789" TEXT="除Firefox外"><node CREATED="1426313319789" ID="44b9sldnjjggdiqabomdi7erp5" MODIFIED="1426313319789" TEXT="任何把非同源页面跳转到javascript:URL的行为是被禁止的"/></node><node CREATED="1426313319789" ID="5sqeiv33ja422fu3b6a6pe7540" MODIFIED="1426313319789" TEXT="Firefox"><node CREATED="1426313319789" ID="16bp1vd7r3s7rbhpslg01b4vcb" MODIFIED="1426313319789" TEXT="当发起的源和要跳转的目标不匹配时，会放到一个特殊的空白源执行"/></node></node><node CREATED="1426313319789" ID="4fgan9qt1j5b55r81r9128g4mj" MODIFIED="1426313319789" TEXT="同源"><node CREATED="1426313319789" ID="45nuh9kihvgn4uf0298mssc6vr" MODIFIED="1426313319789" TEXT="任何内容都可根据需要，任意地把自身或同等权限的页面转向javascrpt:URL"/></node><node CREATED="1426313319789" ID="072kv7d8rt4d070dd520bo9r7u" MODIFIED="1426313319789" TEXT="Refresh重定向"><node CREATED="1426313319789" ID="3j40sgqp35vpiiadutsa68fko2" MODIFIED="1426313319789" TEXT="Webkit和Opera"><node CREATED="1426313319789" ID="4jq04asldgneo86jqes2qj38lp" MODIFIED="1426313319789" TEXT="可以"/></node><node CREATED="1426313319789" ID="2lkjk2p3hcdq4c4i04ljrnfl8d" MODIFIED="1426313319789" TEXT="其他浏览器"><node CREATED="1426313319789" ID="4l5i87qnob08qold8p0t6j837q" MODIFIED="1426313319789" TEXT="拒绝"/></node></node></node><node CREATED="1426313319789" ID="7msd461uc9mt2pecah2e7d239h" MODIFIED="1426313319789" TEXT="如果提供的代码可以执行，且最后一行的值非空，当可以转化为字符串时，会被当作HTML解析"/><node CREATED="1426313319789" ID="3vvv41h0oo20gre16u3g9jdv51" MODIFIED="1426313319789" TEXT="总结表格"/></node><node CREATED="1426313319789" ID="1l95tdsod9socn308auv4skh2c" MODIFIED="1426313319789" POSITION="left" TEXT="关于受限伪URL的一些补充"><node CREATED="1426313319789" ID="724gdcglp5d1f156866dqqrluq" MODIFIED="1426313319789" TEXT="其他安全问题来源"><node CREATED="1426313319789" ID="2cn14j1eombed9je0nj54fr77q" MODIFIED="1426313319789" TEXT="浏览器的一些无从继承，又没有清晰定义的源"><node CREATED="1426313319789" ID="09u3b2vpj5n40122ll12oihfi7" MODIFIED="1426313319789" TEXT="如"><node CREATED="1426313319789" ID="77cbnj4j5uaq7ih249nakd2n11" MODIFIED="1426313319789" TEXT="Firefox"><node CREATED="1426313319789" ID="14sjag58e4i86ilda64imb738i" MODIFIED="1426313319789" TEXT="about:config"/></node><node CREATED="1426313319789" ID="1k2uhgb29ld1tpifa1oulj9khu" MODIFIED="1426313319789" TEXT="Chrome"><node CREATED="1426313319789" ID="00s99nrepljaem7583quenurlj" MODIFIED="1426313319789" TEXT="chrome://downloads"/></node></node><node CREATED="1426313319789" ID="5dvgc4l63t115dvda8j7jmp0n0" MODIFIED="1426313319789" TEXT="问题"><node CREATED="1426313319789" ID="5tck2f42fae9d9ur5a2h4ar0p0" MODIFIED="1426313319789" TEXT="与同源策略控制的边界不兼容"/></node></node></node></node><node CREATED="1426313319789" ID="7g27cocljrldniqo6gt71kv406" MODIFIED="1426313319789" POSITION="left" TEXT="安全工程速查表"><node CREATED="1426313319789" ID="15ghts2u0kol7ph8r6v212254m" MODIFIED="1426313319789" TEXT="派生新窗口或框架，指向服务器端提供的空白页"/><node CREATED="1426313319789" ID="3v9ccj2io2e2v5tn01e24nge6h" MODIFIED="1426313319789" TEXT="不要随便使用data:和javascript:代替about:blank"/><node CREATED="1426313319789" ID="3qcvqsggm5b9rd2742fdm444q1" MODIFIED="1426313319789" TEXT="只有在绝对必要的情况下，才使用data:和javascript:两种伪协议"/></node></node></map>