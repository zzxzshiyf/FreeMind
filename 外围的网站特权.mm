<?xml version="1.0" encoding="UTF-8" standalone="no"?><map version="0.8.1"><node CREATED="1426313259424" ID="2p7l7l1e13oc12gnvo9qukt1b0" MODIFIED="1426313259424" TEXT="15.外围的网站特权"><node CREATED="1426313259424" ID="6g20a5u0tejr24on2d2a3jkelg" MODIFIED="1426313259424" POSITION="right" TEXT="浏览器和托管插件的站点权限"><node CREATED="1426313259424" ID="6o7780gv0oduivp83v69gdkl0h" MODIFIED="1426313259424" TEXT="特权机制"><node CREATED="1426313259424" ID="1lc1ofm1nh6l175ajr93cqenov" MODIFIED="1426313259424" TEXT="举例"><node CREATED="1426313259424" ID="5jte04k648h0gtg7nr8egka2dl" MODIFIED="1426313259424" TEXT="访问摄像头或麦克风"/><node CREATED="1426313259424" ID="5d5e3q2ju8u40abd3or759doqf" MODIFIED="1426313259424" TEXT="查询用户的地理位置"/><node CREATED="1426313259424" ID="193ec4m0fm1sl6g4m9oei6gibc" MODIFIED="1426313259424" TEXT="安装浏览器扩展或主题"/><node CREATED="1426313259424" ID="075i2nomnc4t2i0bva9a2et9f1" MODIFIED="1426313259424" TEXT="打开桌面通知"/></node><node CREATED="1426313259424" ID="3n24nebi48pgrcnovnor3bbkfb" MODIFIED="1426313259424" TEXT="解决"><node CREATED="1426313259424" ID="6d0o26doas2a0331dld7jm2in9" MODIFIED="1426313259424" TEXT="用户批准来自这些应用的申请"><node CREATED="1426313259424" ID="56tklere1du4uotovhgc5vsnk0" MODIFIED="1426313259424" TEXT="问题"><node CREATED="1426313259424" ID="1jkth1l81oh4ha9b9d516lngs3" MODIFIED="1426313259424" TEXT="一般匹配的是主机名，而没有协议和端口号"/></node></node></node></node><node CREATED="1426313259424" ID="7flfp6pb589kndgni34540fovc" MODIFIED="1426313259424" TEXT="硬编码的域名"><node CREATED="1426313259424" ID="2vtp4h26a6tdvqolvpsff848b9" MODIFIED="1426313259424" TEXT="浏览器自带的网站或SOP源"/></node></node><node CREATED="1426313259424" ID="231t6qvk9eug29nd6gurff3rdn" MODIFIED="1426313259424" POSITION="right" TEXT="表单密码管理"><node CREATED="1426313259424" ID="1nl04ltb7gcoghlds9prml64an" MODIFIED="1426313259424" TEXT="好处"><node CREATED="1426313259424" ID="2c6dbhpbp4g8jgl20vnu0n7plh" MODIFIED="1426313259424" TEXT="不需要网站的官方支持"/></node><node CREATED="1426313259424" ID="5ki4m9bjormqk2n7710vhdd8ng" MODIFIED="1426313259424" TEXT="浏览器做法"><node CREATED="1426313259424" ID="519eqhbmo865frj67l8tii11k7" MODIFIED="1426313259424" TEXT="只有碰到和当初输入密码完全同源的站点时才会自动返回身份信息"/><node CREATED="1426313259424" ID="4vsem67niavgblpuibh558fh6n" MODIFIED="1426313259424" TEXT="某些浏览器还会双重验证"><node CREATED="1426313259424" ID="2pjukf19e3jd728govfk56ip2a" MODIFIED="1426313259424" TEXT="检查表单字段的顺序和命名"/><node CREATED="1426313259424" ID="6fel6sasofdlhjipg85d05osgd" MODIFIED="1426313259424" TEXT="表单提交的URL"/><node CREATED="1426313259424" ID="6p4obj371ur21tnd0u9cumtfuo" MODIFIED="1426313259424" TEXT="要填入身份信息的地址"/></node></node><node CREATED="1426313259424" ID="4rjos8d4lsdibdq922ku00q7eg" MODIFIED="1426313259424" TEXT="利用"><node CREATED="1426313259424" ID="452u243b6qbpm62kh8jjf8splv" MODIFIED="1426313259424" TEXT="结合XSS盗取密码"/></node><node CREATED="1426313259424" ID="7sclvqsoq31jm9unnetncim35p" MODIFIED="1426313259424" TEXT="其他"><node CREATED="1426313259424" ID="6odm9u2dh4a6m3lv7gcatqsfr0" MODIFIED="1426313259424" TEXT="可以使用autocomplete=off禁止表单自动填充"/></node></node><node CREATED="1426313259425" ID="58ublv7divbngvb4ii6anb02iv" MODIFIED="1426313259425" POSITION="right" TEXT="IE浏览器的区域模型"><node CREATED="1426313259425" ID="4o6nslm0n26a4upcs1m0nbrn5n" MODIFIED="1426313259425" TEXT="区域模式"><node CREATED="1426313259425" ID="6e959q4mmb3dvmu652b03fk21e" MODIFIED="1426313259425" TEXT="目的"><node CREATED="1426313259425" ID="3uplfc9t07s2vk8b3ocltc9li4" MODIFIED="1426313259425" TEXT="解决用户对不同类型的网站应用在安全上的需求差异"/></node><node CREATED="1426313259425" ID="03b71jsbo43fkah160ples89h6" MODIFIED="1426313259425" TEXT="类型"><node CREATED="1426313259425" ID="0539j79siok49jhos68irkpoie" MODIFIED="1426313259425" TEXT="本地计算机"><node CREATED="1426313259425" ID="1bdsmtl8a92j06g0mckrvjmjpt" MODIFIED="1426313259425" TEXT="对file:有效"/><node CREATED="1426313259425" ID="547f3pontfllboj7r8g1huf22h" MODIFIED="1426313259425" TEXT="用户不能在这个集合增删元素，也不能通过常规界面修改安全设置"/><node CREATED="1426313259425" ID="1269evaetf1i561vguv55v12nr" MODIFIED="1426313259425" TEXT="管理员和开发人员可以通过修改注册表或使用urlmon.dll钩子覆盖安全设置"/></node><node CREATED="1426313259425" ID="3d1bilmlq7a61im9sam7j88bhk" MODIFIED="1426313259425" TEXT="本地Intranet"><node CREATED="1426313259425" ID="1t0mqqcbeug9tmv26lppd31i9a" MODIFIED="1426313259425" TEXT="包括本地网络上的一些受信应用"/><node CREATED="1426313259425" ID="2b3dm7rt705032toksdg15gnjl" MODIFIED="1426313259425" TEXT="风险"><node CREATED="1426313259425" ID="7ivjcecghbocc807lpovse6gnv" MODIFIED="1426313259425" TEXT="不受限制的访问系统剪贴板"/><node CREATED="1426313259425" ID="0jpdt49q9d4oor2oaj062k7fp6" MODIFIED="1426313259425" TEXT="打开没有地址栏的浏览器窗口"/><node CREATED="1426313259425" ID="6uac3ajnn4n7gho3vhou3njpo3" MODIFIED="1426313259425" TEXT="绕过框架跳转的安全检查"/><node CREATED="1426313259425" ID="0f3oqu9s3mcubb3kukf4ru1i7r" MODIFIED="1426313259425" TEXT="……"/></node><node CREATED="1426313259425" ID="3n6mrcq85kbr8o5j4itdjfilin" MODIFIED="1426313259425" TEXT="检测Intranet的机制"><node CREATED="1426313259425" ID="2dntqk6pjh4aqcar7ehblqn91p" MODIFIED="1426313259425" TEXT="可配置"/></node></node><node CREATED="1426313259425" ID="3v2l1ofgikv4g80n67hnajjob3" MODIFIED="1426313259425" TEXT="受信任的站点"><node CREATED="1426313259425" ID="1ik2s9j38tmrrvhg5v163ov0km" MODIFIED="1426313259425" TEXT="通常为空白的"/><node CREATED="1426313259425" ID="7vt7ka96and2vnemdb88amqa18" MODIFIED="1426313259425" TEXT="安全设置和Intranet相当"/><node CREATED="1426313259425" ID="3vlcbk40eiutd8hhik3vlp836o" MODIFIED="1426313259425" TEXT="完全由用户管理，没有自动检测机制"/></node><node CREATED="1426313259425" ID="0eoi26bp50g5833agbvef0igrg" MODIFIED="1426313259425" TEXT="受限制的站点"><node CREATED="1426313259425" ID="0s1b6445qpno7mcafee8396j6p" MODIFIED="1426313259425" TEXT="通常为空白的"/><node CREATED="1426313259425" ID="0euuvfujmsgjebfc0p9g0t77pj" MODIFIED="1426313259425" TEXT="默认设置会去掉返回网页的某些基本功能"/><node CREATED="1426313259425" ID="64m5qp94ldep8eqoqqamdeamql" MODIFIED="1426313259425" TEXT="问题"><node CREATED="1426313259425" ID="4pdjj08s2fqilg8ree4t1k7cj4" MODIFIED="1426313259425" TEXT="安全上带来的好处很少"/><node CREATED="1426313259425" ID="7v0o3ukm921jr6j0gejaoo9u4t" MODIFIED="1426313259425" TEXT="可用性值得怀疑"/></node></node><node CREATED="1426313259425" ID="0qiio0lkvi0k4midetr11hqfvv" MODIFIED="1426313259425" TEXT="Internet"><node CREATED="1426313259425" ID="1rv16it1rqtpi1qv9bpobnmdji" MODIFIED="1426313259425" TEXT="默认类别"/></node></node><node CREATED="1426313259425" ID="5bahrq350hhegsnsmftri0nla8" MODIFIED="1426313259425" TEXT="问题"><node CREATED="1426313259425" ID="05puhm8v6kqgrrsvqgso4ho140" MODIFIED="1426313259425" TEXT="晦涩难懂的术语和复杂的设置"/><node CREATED="1426313259425" ID="4tre1b3c3jh6igs87fiu0ctd9p" MODIFIED="1426313259425" TEXT="聚合了一大堆完全无关的权限"/></node></node><node CREATED="1426313259425" ID="1vjpck5c916qd3ae42mvi7nlbu" MODIFIED="1426313259425" TEXT="Web标记和域标识符"><node CREATED="1426313259425" ID="4ecc2pc6qjrq5nnb137omjnd6i" MODIFIED="1426313259425" TEXT="目的"><node CREATED="1426313259425" ID="3btrl49hg0tsj0vlt08anv9ea1" MODIFIED="1426313259425" TEXT="保证保存下来的外部文档仍能跟踪到文档原本的区域信息"/></node><node CREATED="1426313259425" ID="1a77pmgdae2ighrgcsigm2ml77" MODIFIED="1426313259425" TEXT="机制"><node CREATED="1426313259426" ID="4b3kc3ggo97hgo2tb8ag4c6omh" MODIFIED="1426313259426" TEXT="Web标记"><node CREATED="1426313259426" ID="0rdf88ss2871ltf15o022iinld" MODIFIED="1426313259426" TEXT="做法"><node CREATED="1426313259426" ID="1p94glel2kttqmubaisff4v9ak" MODIFIED="1426313259426" TEXT="IE自动在下载的HTML文档头部添加一个简单的伪HTML标签，以标识文档的最初来源"/><node CREATED="1426313259426" ID="60kdqptfu45gbnol1g0onnlo3i" MODIFIED="1426313259426" TEXT="其权限相当于该区域权限中一个独一无二的源"/></node><node CREATED="1426313259426" ID="7jbf1pslkikn75t3457dugto5q" MODIFIED="1426313259426" TEXT="问题"><node CREATED="1426313259426" ID="4oka76mkil77m2stmth798g4vm" MODIFIED="1426313259426" TEXT="提前插入伪造"/></node></node><node CREATED="1426313259426" ID="54crp7dt8nldkj2qp08k4i2mlm" MODIFIED="1426313259426" TEXT="备用数据流的域标识符"><node CREATED="1426313259426" ID="64bhe7gcvb3at1938l8auesp5n" MODIFIED="1426313259426" TEXT="做法"><node CREATED="1426313259426" ID="60831kbuuqf7iq1bjosjprq6bm" MODIFIED="1426313259426" TEXT="IE和Chrome：给每个下载文件追加的NTFS元数据，以一串数字标识文档来自哪个区域"/></node><node CREATED="1426313259426" ID="6vq0ed3t10vqml1h24ils87lrm" MODIFIED="1426313259426" TEXT="优缺点"><node CREATED="1426313259426" ID="1t1e8tfm95cbidskqela1hub3b" MODIFIED="1426313259426" TEXT="可移植性比Web标记差，只能用于NTFS系统"/><node CREATED="1426313259426" ID="2n7lkpe2g406moetaibktgqt1g" MODIFIED="1426313259426" TEXT="可用于非HTML文档"/><node CREATED="1426313259426" ID="08tbr3cp8hmf39h6liuqp5t2ug" MODIFIED="1426313259426" TEXT="只能被IE、Windows GUI程序和其他一些微软产品识别"/></node></node></node></node></node><node CREATED="1426313259426" ID="1g3nemmajp7mg46va14ai3rjaj" MODIFIED="1426313259426" POSITION="left" TEXT="安全工程速查表"><node CREATED="1426313259426" ID="3882hlqe84o7690jl5s48e9k5d" MODIFIED="1426313259426" TEXT="当Web应用要求提升权限时"><node CREATED="1426313259426" ID="3qjlrgv6l9p8ddkf1oeqte1m88" MODIFIED="1426313259426" TEXT="对特权请求提前计划好并划分清楚，不要请求用户降低IE浏览器的安全设置"/></node><node CREATED="1426313259427" ID="75m37irtdemksl4ig3tek6mn50" MODIFIED="1426313259427" TEXT="当创建会需要用到特权源的插件或扩展时"><node CREATED="1426313259427" ID="2q9j88u6ip04o7msud56jck1uj" MODIFIED="1426313259427" TEXT="设计的API要可靠，尽量使用辅助的安全手段"/><node CREATED="1426313259431" ID="2ncf3b0a76deqh7udfmrao8l87" MODIFIED="1426313259431" TEXT="不要对非加密源设置白名单"/></node></node></node></map>