<?xml version="1.0" encoding="UTF-8" standalone="no"?><map version="0.8.1"><node CREATED="1426313376715" ID="3ksv0usp5o3i46kcend8koqlei" MODIFIED="1426313376715" TEXT="5.层叠样式表"><node CREATED="1426313376715" ID="6r9auvo1531fjnbcmap88c64rt" MODIFIED="1426313376715" POSITION="right" TEXT="概述"><node CREATED="1426313376715" ID="225rti958ip81f3lfbai7uqbsp" MODIFIED="1426313376715" TEXT="历史"><node CREATED="1426313376715" ID="20tvq4e9ul490r1dc8d0isps3t" MODIFIED="1426313376715" TEXT="lvl1：1996-2008"/><node CREATED="1426313376715" ID="579jm07idht9f48mjkaet0ut7e" MODIFIED="1426313376715" TEXT="lvl2：1998-2011"/><node CREATED="1426313376715" ID="3isos47pe3cl10769u2a59qp45" MODIFIED="1426313376715" TEXT="lvl3：2005-"/></node><node CREATED="1426313376715" ID="6i49ddvhns4k23vkftrh8ddj3a" MODIFIED="1426313376715" TEXT="各浏览器支持CSS2/3的大部分功能，但是细节有差异"/></node><node CREATED="1426313376715" ID="33k3f0lolrrs01dsmfqqlkkvah" MODIFIED="1426313376715" POSITION="right" TEXT="CSS基本语法"><node CREATED="1426313376715" ID="24k9ibd8qi7pbspb9ob18kfego" MODIFIED="1426313376715" TEXT="使用方式"><node CREATED="1426313376715" ID="4srv894gfu4ft48igd0dhgd91q" MODIFIED="1426313376715" TEXT="文档里直接使用&lt;style&gt;"><node CREATED="1426313376716" ID="58gadtgbv8jer5n1rioo56j90l" MODIFIED="1426313376716" TEXT="全局生效"/></node><node CREATED="1426313376716" ID="1ba1hnd8ac5jbcpmo7q03q5etn" MODIFIED="1426313376716" TEXT="通过&lt;link rel=stylesheet&gt;引入外部URL"/><node CREATED="1426313376716" ID="3eabe00394fkh0p7pi5nupkm9q" MODIFIED="1426313376716" TEXT="为某个标签赋予一个style参数值"/><node CREATED="1426313376716" ID="2q366lgk7cvm9vcvqrmmh2lr0c" MODIFIED="1426313376716" TEXT="基于XML文档可加入&lt;?xml-stylesheet href=... ?&gt;"/></node><node CREATED="1426313376716" ID="57oebbod008csuom37kaq6hh3b" MODIFIED="1426313376716" TEXT="语法"><node CREATED="1426313376716" ID="2i6bouhrq17cdgb5m25saeb1k5" MODIFIED="1426313376716" TEXT="每个选择器用大括号括起，每行分号分隔的“名称: 值”"/><node CREATED="1426313376716" ID="39tnb6ionv4rng1187o4rkr4in" MODIFIED="1426313376716" TEXT="选择器"><node CREATED="1426313376716" ID="5jkch0r676v7s8qgvmjf547n08" MODIFIED="1426313376716" TEXT="img"/><node CREATED="1426313376716" ID="1jv0349db1594kjt458d485rbb" MODIFIED="1426313376716" TEXT=".photos"/><node CREATED="1426313376716" ID="6951trnfn4s8q82i1hk9vkc2fc" MODIFIED="1426313376716" TEXT="img.company_logo"/><node CREATED="1426313376716" ID="2tetp0ksihhufilj7gknp2kaiv" MODIFIED="1426313376716" TEXT=".photos:hover"/></node><node CREATED="1426313376716" ID="7cb6tdboakm2gluebsf53kml6l" MODIFIED="1426313376716" TEXT="复杂选择器"><node CREATED="1426313376716" ID="64utb09bsg9b32rhbhmh1ur2ss" MODIFIED="1426313376716" TEXT="可以设定在标签的某个参数值里出现某些特定字符串，或特定标签出现在标记语言的某个特定位置时，才应用该规则集"/></node><node CREATED="1426313376716" ID="7ol83qne289cjef1ncndd37tj9" MODIFIED="1426313376716" TEXT="注释"><node CREATED="1426313376716" ID="7c1u3qtmsfl3dvmiro6oh1jamf" MODIFIED="1426313376716" TEXT="/*...*/"/></node></node><node CREATED="1426313376716" ID="48duhlak2haida07u30cunsfar" MODIFIED="1426313376716" TEXT="属性定义"><node CREATED="1426313376716" ID="6voulmcjbj90th6amo4cl2nujt" MODIFIED="1426313376716" TEXT="属性值的格式"><node CREATED="1426313376716" ID="0p5lm6qsd4pintaesha5nfch2p" MODIFIED="1426313376716" TEXT="原始文本"><node CREATED="1426313376716" ID="2rd1fgdltbgl4ccilj4kos2gsh" MODIFIED="1426313376716" TEXT="设定数值型的值（单位可选），RGB向量，以名称指代的颜色，预定义好的关键字"/></node><node CREATED="1426313376716" ID="4hv77t9q8kqdnedggbbgi4a2jp" MODIFIED="1426313376716" TEXT="引号括起的字符串"><node CREATED="1426313376716" ID="0vuvedfm3epins0vmne7iut95m" MODIFIED="1426313376716" TEXT="值不是固定的关键字时，应使用引号（单/双）"><node CREATED="1426313376716" ID="7d6bcg5ijuct2oso8nuouc2fbb" MODIFIED="1426313376716" TEXT="设置字体、某些URL时不用"/><node CREATED="1426313376716" ID="2er8gpq4j03irsv8loaobegjji" MODIFIED="1426313376716" TEXT="content属性必须要"/></node></node><node CREATED="1426313376716" ID="0pvp47hhn38qphfuhbm8uo9lbl" MODIFIED="1426313376716" TEXT="函数表示法"><node CREATED="1426313376716" ID="0g1cd0n2ggtsdsfvrb9pjrd70h" MODIFIED="1426313376716" TEXT="rgb()"/><node CREATED="1426313376716" ID="5j99pv6kalqhgda4vi1m7plf52" MODIFIED="1426313376716" TEXT="url()"/><node CREATED="1426313376716" ID="6hffaf6q1u4v7p2vq3arnhglfj" MODIFIED="1426313376716" TEXT="今年出现的伪功能函数scale()、rotate()、skew()等"/><node CREATED="1426313376716" ID="4jklh5tj792cm55imbhuspcjh0" MODIFIED="1426313376716" TEXT="IE的expression()可在CSS中嵌入JS语句，非常危险"/></node></node></node><node CREATED="1426313376716" ID="4vl5ok5jv4ufdnoprgih8lernb" MODIFIED="1426313376716" TEXT="@指令和XBL绑定"><node CREATED="1426313376716" ID="6klg1pv3rvrum3a7gvn7m5ieil" MODIFIED="1426313376716" TEXT="@"><node CREATED="1426313376716" ID="5rilu39or0p7sui1k47i5rl3m7" MODIFIED="1426313376716" TEXT="指定命名空间"/><node CREATED="1426313376716" ID="136qmq5be4q3qdldp4cnekb5tc" MODIFIED="1426313376716" TEXT="设定对不同的显示媒体使用不同的样式表"/><node CREATED="1426313376716" ID="2ui6u4msbs9e716h8ijlkabboh" MODIFIED="1426313376716" TEXT="@charset设置字符集"/><node CREATED="1426313376716" ID="0hrmni3je5oqonf4nfvkgsmfue" MODIFIED="1426313376716" TEXT="@import插入一个外部文件"/></node><node CREATED="1426313376716" ID="1o9161k6foakkku0t2q3a955va" MODIFIED="1426313376716" TEXT="XBL"><node CREATED="1426313376717" ID="1urcvegospo09ngeu2ukuksfpv" MODIFIED="1426313376717" TEXT="Firefox中利用-moz-binding从外部源中载入外部内容指令（如JS）"/></node><node CREATED="1426313376717" ID="7sev7icrihlb9c5jrnomrvtshf" MODIFIED="1426313376717" TEXT="问题"><node CREATED="1426313376717" ID="35dq1gjv8ri0gjd48m09cbtn7t" MODIFIED="1426313376717" TEXT="引入伪URL存在安全隐患"><node CREATED="1426313376717" ID="5g4vhivnbkmnj6b07en5bifnre" MODIFIED="1426313376717" TEXT="IE6会直接接受这种处理"/></node></node></node><node CREATED="1426313376717" ID="6bjoon8hfbk68ldpn6g13mo4ia" MODIFIED="1426313376717" TEXT="与HTML的交互"><node CREATED="1426313376717" ID="24kvt00tdok18n58to2q2v1k2h" MODIFIED="1426313376717" TEXT="HTML中嵌入样式表会优先执行HTML解析"><node CREATED="1426313376717" ID="6cl1oepolm76r5oo40rbd1nqjr" MODIFIED="1426313376717" TEXT="在CSS中如果包含某些HTML语法会很不安全"/></node></node></node><node CREATED="1426313376717" ID="6gv2459fo8l5a6atn1dd9kd884" MODIFIED="1426313376717" POSITION="right" TEXT="重新同步的风险"><node CREATED="1426313376717" ID="747lfmr2ahnooh4gscoh7epn68" MODIFIED="1426313376717" TEXT="问题"><node CREATED="1426313376717" ID="0pq9rljs05cs880brlgec8ik42" MODIFIED="1426313376717" TEXT="解析器碰到错误时，仍会继续工作直到碰到下一对匹配的大括号时恢复正常解析"/></node><node CREATED="1426313376717" ID="16uuq67qliogqpbqujejujrgtm" MODIFIED="1426313376717" TEXT="攻击"><node CREATED="1426313376717" ID="458s6qknic4cna13llqsdhj28h" MODIFIED="1426313376717" TEXT="利用IE对多行字符串文本支持，其他浏览器不支持"/><node CREATED="1426313376717" ID="2c3kmdsf2hb99t3sr17h8rk68h" MODIFIED="1426313376717" TEXT="利用早期解析器无法理解CSS3的方括号"><node CREATED="1426313376717" ID="72uqftrt89q2omdmideo36q4vo" MODIFIED="1426313376717" TEXT="IE6"/></node></node></node><node CREATED="1426313376717" ID="35lcoveedos4k7nr6sfgd1nd9g" MODIFIED="1426313376717" POSITION="left" TEXT="字符编码"><node CREATED="1426313376717" ID="3q6l0qjnfha30j6n4q1265cvpl" MODIFIED="1426313376717" TEXT="转义"><node CREATED="1426313376717" ID="514i8bt69tb84en9lcnncnd3ip" MODIFIED="1426313376717" TEXT="\后面跟1-6位十六进制数字，再加一个空格结束"/><node CREATED="1426313376717" ID="3gv44epj4e9kuicc5ielp9kghp" MODIFIED="1426313376717" TEXT="非十六进制字符前加\，会把该字符按字面意思解析（不能解析尖括号等HTML控制的字符）"/><node CREATED="1426313376717" ID="69thjhhu0cj2gc2aia4bpfji8f" MODIFIED="1426313376717" TEXT="注意"><node CREATED="1426313376717" ID="2tl4obget43q4dto326u4ru4d0" MODIFIED="1426313376717" TEXT="许多解析器能接受未被引号括起的字符串里的任意转义序列"/><node CREATED="1426313376717" ID="173882quff7ice62p797p019ro" MODIFIED="1426313376717" TEXT="IE：转义解析优先级高于对伪函数语法的解析"/><node CREATED="1426313376717" ID="7nescp5tsd5mm4d2cp4rckp9ec" MODIFIED="1426313376717" TEXT="IE：url()中的反斜杠不会被识别为转义"/></node></node></node><node CREATED="1426313376717" ID="644nb4jpcsc50dd72dq79n5g95" MODIFIED="1426313376717" POSITION="left" TEXT="安全工程速查表"><node CREATED="1426313376717" ID="6qq6encdm47kethdv4ajct8vsh" MODIFIED="1426313376717" TEXT="加载远程样式表时"><node CREATED="1426313376717" ID="2p1h6i88ab1vhoacujej3cv1ib" MODIFIED="1426313376717" TEXT="把自身站点的安全性与远程CSS的服务器关联到一起"/><node CREATED="1426313376717" ID="0vs1nuv9cfiqbfm13ss6jbddac" MODIFIED="1426313376717" TEXT="如有疑问，在本地保存一份副本"/><node CREATED="1426313376717" ID="5l5n45181srv18jmohmvdb79br" MODIFIED="1426313376717" TEXT="HTTPS站点中，要引用的CSS也必须使用HTTPS"/></node><node CREATED="1426313376717" ID="1khm225t4rqktoci46hot4r4jj" MODIFIED="1426313376717" TEXT="CSS里包含攻击者控制的信息时"><node CREATED="1426313376717" ID="3j0u98i7t93osou2hc6tmvp7km" MODIFIED="1426313376717" TEXT="在独立区块里的字符串和URL"><node CREATED="1426313376717" ID="72qjfdoq1lgisar8q89ng5tqqr" MODIFIED="1426313376717" TEXT="尽量用引号括起来"/><node CREATED="1426313376717" ID="23m2ns5mo75kr5skhk91hofkd9" MODIFIED="1426313376717" TEXT="对所有控制字符、&quot;\&quot;、&quot;&lt;&quot;、&quot;&gt;&quot;、&quot;{&quot;、&quot;}&quot;转义"/><node CREATED="1426313376717" ID="1f9m3dhhqh6hr13b41p2lsd48v" MODIFIED="1426313376717" TEXT="使用数字编码形式的转义用引号括起来"/><node CREATED="1426313376717" ID="4h3ro1mfhj1fkqm1se33706vu0" MODIFIED="1426313376717" TEXT="对高位字符转义"/></node><node CREATED="1426313376717" ID="18dnrgl62fqr9gbe64an4q8beq" MODIFIED="1426313376717" TEXT="在style参数值中的字符串"><node CREATED="1426313376717" ID="09nood1s3h76d6m5gvf3ugcpvd" MODIFIED="1426313376717" TEXT="设计多重转义的问题，易出错，尽量不做"/><node CREATED="1426313376717" ID="0sh6f979a18c1hsndbqin8foun" MODIFIED="1426313376717" TEXT="如无可避免，先CSS转义，再HTML参数编码"/></node><node CREATED="1426313376717" ID="4q7vijdmo6dcbt6k94ou1ho3br" MODIFIED="1426313376717" TEXT="非字符串型的属性"><node CREATED="1426313376717" ID="4lka4lhu3uq90j7g73sk4noj52" MODIFIED="1426313376717" TEXT="白名单设置关键字只能由字母数字组成，并对数字型的值严格验证"/></node></node><node CREATED="1426313376717" ID="401vai81buake9i3542p682s53" MODIFIED="1426313376718" TEXT="过滤用户提供的CSS时"><node CREATED="1426313376718" ID="61014jdpifhdf63plkg086oor7" MODIFIED="1426313376718" TEXT="移除功能性规则以外的内容"><node CREATED="1426313376718" ID="3370n77m1ieeglfpbi8b61p4jr" MODIFIED="1426313376718" TEXT="注释区块"/><node CREATED="1426313376718" ID="7e27una8ggtokcpop53bo092gd" MODIFIED="1426313376718" TEXT="@"/></node><node CREATED="1426313376718" ID="5asc1tvvbi63s0iobt9a3uv9na" MODIFIED="1426313376718" TEXT="严格验证选择器语法"><node CREATED="1426313376718" ID="4h2p1pljvc965tvvpal0jq7bgo" MODIFIED="1426313376718" TEXT="只允许数字字母、下划线、空格"/><node CREATED="1426313376718" ID="5h57dncgi463d7mlbb4m9pp51e" MODIFIED="1426313376718" TEXT="&quot;{&quot;前的冒号、点号和逗号位置要正确"/><node CREATED="1426313376718" ID="6v31gubi7v7eud0r3v8u1vpgch" MODIFIED="1426313376718" TEXT="不允许复杂选择器"/></node><node CREATED="1426313376718" ID="3c4qnfb9pgq9i65gil226vdk5b" MODIFIED="1426313376718" TEXT="解析和校验在大括号里的每条规则"><node CREATED="1426313376718" ID="3fv53sf73ro8q7255rctupjgfc" MODIFIED="1426313376718" TEXT="白名单设置允许的属性"/><node CREATED="1426313376718" ID="7ebpaccc3o4st209vlnscq0k7l" MODIFIED="1426313376718" TEXT="属性只接受符合预期、明确为安全的值"/><node CREATED="1426313376718" ID="040n1valm4qvq7otcp7hum7iaf" MODIFIED="1426313376718" TEXT="注意：字符串赋予某些属性时，即使没使用url()，也会按其解析"/></node><node CREATED="1426313376718" ID="50u8kaamkavn1egpf95ls6ifh6" MODIFIED="1426313376718" TEXT="按本章提到的编码方式对每个参数值编码"/><node CREATED="1426313376718" ID="2hbqnn4th14d7ik9dmsfnpjcj8" MODIFIED="1426313376718" TEXT="把不受信任的内容单独放在一个框架里显示出来"/></node><node CREATED="1426313376718" ID="6icdi061rtm2ildu0frog4uqtn" MODIFIED="1426313376718" TEXT="在HTML标记里允许用户设定class值时"><node CREATED="1426313376718" ID="3no42lqq288r5vgcol1mlm1b4j" MODIFIED="1426313376718" TEXT="确保用户提供的CSS设置，不会和网站UI已用到的class重名"/></node></node></node></map>