<?xml version="1.0" encoding="UTF-8" standalone="no"?><map version="0.8.1"><node CREATED="1426313127170" ID="68jrido69rjmae9o1qbfi8ijf1" MODIFIED="1426313127170" TEXT="16.新的浏览器安全特性与未来展望"><node CREATED="1426313127170" ID="34gikgs9u5ifpnbh4agh8fmu5v" MODIFIED="1426313127170" POSITION="right" TEXT="安全模型扩展框架"><node CREATED="1426313127171" ID="1aecvov20pofob949n44tp3pt0" MODIFIED="1426313127171" TEXT="跨域请求"><node CREATED="1426313127171" ID="5g7r6ckj0p3fghaq22sn1k4q9v" MODIFIED="1426313127171" TEXT="CORS请求类型"><node CREATED="1426313127171" ID="0c4iarmjhcav00i2ke7qqubbfb" MODIFIED="1426313127171" TEXT="简单请求"><node CREATED="1426313127171" ID="1hpbph07i5pc10oath49f2rhfl" MODIFIED="1426313127171" TEXT="只能使用方法GET、POST、HEAD"/><node CREATED="1426313127171" ID="3q8uaeagjbbk4l815v9daut0go" MODIFIED="1426313127171" TEXT="发起方只能获得头域"><node CREATED="1426313127171" ID="0i4iffkvtpep0cqk0oifejqeq1" MODIFIED="1426313127171" TEXT="Cache-Control"/><node CREATED="1426313127171" ID="4dg91arqk0mg7kouqekapmmpfu" MODIFIED="1426313127171" TEXT="Content-Language"/><node CREATED="1426313127171" ID="57lofvm9skl73dcq1nhtec289s" MODIFIED="1426313127171" TEXT="Content-Type"/><node CREATED="1426313127171" ID="538v1fls6pjjtmn2b4cjvq738s" MODIFIED="1426313127171" TEXT="Expires"/><node CREATED="1426313127171" ID="3vl64daemgq5ala1g5gkjsc822" MODIFIED="1426313127171" TEXT="Last-Modified"/><node CREATED="1426313127171" ID="386mrg95kt6cls00cc833j21fv" MODIFIED="1426313127171" TEXT="Pragma"/></node><node CREATED="1426313127171" ID="3t2scpo02fo1dmpbonsse4gj57" MODIFIED="1426313127171" TEXT="只要请求包含自定义请求头，就降级为非简单请求"/><node CREATED="1426313127171" ID="7n23ksjdf50r12dh0pnkabvuna" MODIFIED="1426313127171" TEXT="Webkit还会把包含数据体提交的请求当作非简单请求"/></node><node CREATED="1426313127171" ID="2pcojnf6i7a1c9o2s1u2fjcgq2" MODIFIED="1426313127171" TEXT="非简单请求"/></node><node CREATED="1426313127171" ID="3r5vs8ovc3249nk1r7l4h1e2pr" MODIFIED="1426313127171" TEXT="CORS简单请求的安全检查"><node CREATED="1426313127171" ID="5f7adl65rap0b7lcaojl9i6vqq" MODIFIED="1426313127171" TEXT="做法"><node CREATED="1426313127171" ID="4gjg9svsmc8bdm83m0ta86ra5p" MODIFIED="1426313127171" TEXT="CORS的简单请求会即时提交给服务器端，而不会先确认目标是否愿意接受跨域通信"/><node CREATED="1426313127171" ID="1e77g6vfrf37r7i2h2auhhbjtj" MODIFIED="1426313127171" TEXT="返回头要有符合规定的Access-Control-Allow-Origin头"/></node></node><node CREATED="1426313127171" ID="68hsdvb8h087jd645fulkqp1ga" MODIFIED="1426313127171" TEXT="非简单请求和预检查"><node CREATED="1426313127171" ID="5foajdua5ac5h20do3ib521hhv" MODIFIED="1426313127171" TEXT="两步握手"><node CREATED="1426313127171" ID="161scm252n4s8aopmlmon35mnn" MODIFIED="1426313127171" TEXT="先给目标URL发OPTIONS请求，用若干请求头为参数描绘其后真正的XMLHttpRequest基本情况"><node CREATED="1426313127171" ID="09896unubjkcmapst9sgmck5qu" MODIFIED="1426313127171" TEXT="Origin"/><node CREATED="1426313127171" ID="35k5asntbvuipg3ampht5h5rvm" MODIFIED="1426313127171" TEXT="Access-Control-Request-Method"/><node CREATED="1426313127171" ID="0g5850oke1mnbpq8o0i3qkp33t" MODIFIED="1426313127171" TEXT="Access-Control-Request-Headers"/></node><node CREATED="1426313127171" ID="1r4lb0p8m24rcq4egk8j9288as" MODIFIED="1426313127171" TEXT="响应包含如下头时才算握手成功"><node CREATED="1426313127171" ID="1o8k0sfn1jboq3sm3renfvcqdq" MODIFIED="1426313127171" TEXT="Access-Control-Allow-Origin"/><node CREATED="1426313127171" ID="1120qkfefmbbjar2pseaqvld94" MODIFIED="1426313127171" TEXT="Access-Control-Method"/><node CREATED="1426313127171" ID="3hhhvqvgokm52u9f8cecnvk2e1" MODIFIED="1426313127171" TEXT="Access-Control-Allow-Headers"/></node></node></node><node CREATED="1426313127171" ID="697cgfvbco15lte9ah71gsbu99" MODIFIED="1426313127171" TEXT="CORS的现状"><node CREATED="1426313127171" ID="73sosr7giu156nlh18cc31c5bb" MODIFIED="1426313127171" TEXT="只有Firefox和Webkit浏览器支持"/><node CREATED="1426313127171" ID="29m7e07bne0e82ijq7jtcbu9m4" MODIFIED="1426313127171" TEXT="未采纳的原因"><node CREATED="1426313127171" ID="3q87kv473nbf8dd6p62mdcst19" MODIFIED="1426313127172" TEXT="不如postMessage(...)那么不可或缺"/><node CREATED="1426313127172" ID="2jlvv4b54lh3nj7mae2smmrjp3" MODIFIED="1426313127172" TEXT="批评声音"><node CREATED="1426313127172" ID="5537uqvbq8873pa4lroedraofg" MODIFIED="1426313127172" TEXT="该策略会导致没必要的全局身份凭证的滥用"/><node CREATED="1426313127172" ID="0vd3mdsbt5e085k0gn0uok1mda" MODIFIED="1426313127172" TEXT="该策略太复杂"/><node CREATED="1426313127172" ID="7i8gkkek2q1hqccdh9bdusdke1" MODIFIED="1426313127172" TEXT="更容易遭致HTTP头域注入"><node CREATED="1426313127172" ID="4l9kikg3nnpd0ram4aii1d1pd0" MODIFIED="1426313127172" TEXT="较没说服力"/></node></node></node></node></node><node CREATED="1426313127172" ID="14rlkcl29c2ig2dlnk1tbpuvoh" MODIFIED="1426313127172" TEXT="XDomainRequest"><node CREATED="1426313127172" ID="3sem8hf8779jp74ctnduu8810f" MODIFIED="1426313127172" TEXT="微软开发的与CORS对等的方案"/><node CREATED="1426313127172" ID="35j4ai2l68qjrqo4vqh059nlec" MODIFIED="1426313127172" TEXT="特点"><node CREATED="1426313127172" ID="26ho794992p5u7j3p5c6klhu78" MODIFIED="1426313127172" TEXT="请求永远是匿名的"/><node CREATED="1426313127172" ID="080sjmjcmgcjp239qlqhr83miq" MODIFIED="1426313127172" TEXT="不允许使用任何自定义的HTTP请求头或方法"/><node CREATED="1426313127172" ID="1oesiqj6j0ong67fm6h6uoj9id" MODIFIED="1426313127172" TEXT="请求也有Origin头，且须匹配响应的Access-Control-Allow-Origin"/></node><node CREATED="1426313127172" ID="1t0g6r999919rapleq8ddsun30" MODIFIED="1426313127172" TEXT="支持度"><node CREATED="1426313127172" ID="1g7prlem2d2shmrruksl5ee2pm" MODIFIED="1426313127172" TEXT="IE8以上"/><node CREATED="1426313127172" ID="7jbuv5h456uiua70hqs8lvse85" MODIFIED="1426313127172" TEXT="其他浏览器不支持"/></node><node CREATED="1426313127172" ID="4irmouilco1tdo404m20h83q6u" MODIFIED="1426313127172" TEXT="第三种方案"><node CREATED="1426313127172" ID="1eloempimjo8fupc2q4ubuokij" MODIFIED="1426313127172" TEXT="统一消息机制UMP"/><node CREATED="1426313127172" ID="3sjak1j3fnd5bg6q5380u19d8a" MODIFIED="1426313127172" TEXT="暂无浏览器支持"/></node></node><node CREATED="1426313127172" ID="3u1rs97533b3bqd3n1dj2jaoep" MODIFIED="1426313127172" TEXT="Origin请求头的其他应用"><node CREATED="1426313127172" ID="4pl1vmqam30ue4242pmefbu44k" MODIFIED="1426313127172" TEXT="应用"><node CREATED="1426313127172" ID="0k204oepq8ig2no0cit4ej5os2" MODIFIED="1426313127172" TEXT="获得请求SOP来源信息，防范跨站请求漏洞，又不会泄露敏感路径或查询字符串中的数据"/></node><node CREATED="1426313127172" ID="3qtcv6q1gtok8r4pel8pm6p3d1" MODIFIED="1426313127172" TEXT="支持度"><node CREATED="1426313127172" ID="4kus288ssbehqi8mmrfqvo9lck" MODIFIED="1426313127172" TEXT="只有提交HTML表单时的Webkit浏览器"/></node></node></node><node CREATED="1426313127172" ID="2p7q4kt8ek7ohb6ut84fd4cuhr" MODIFIED="1426313127172" POSITION="right" TEXT="安全模型限制框架"><node CREATED="1426313127172" ID="23sd4s9ar1thg49ru9qtngjr27" MODIFIED="1426313127172" TEXT="内容安全策略"><node CREATED="1426313127172" ID="0n05vk63dmgv89g0lhnbm5k6p8" MODIFIED="1426313127172" TEXT="概述"><node CREATED="1426313127172" ID="59uh88u3tpua565e2hsq0m1nhh" MODIFIED="1426313127172" TEXT="初衷"><node CREATED="1426313127172" ID="74mlpo7ga195uur6qlesketmff" MODIFIED="1426313127172" TEXT="创建一个无所不包的机制，消除常见的Web漏洞"/></node><node CREATED="1426313127172" ID="7d2rvjjp3d1a8te3a0rev0qev1" MODIFIED="1426313127172" TEXT="支持度"><node CREATED="1426313127172" ID="3evf4p9h4qah3nfjl23994vg90" MODIFIED="1426313127172" TEXT="Webkit部分支持，且在实现上与Firefox有差异"/><node CREATED="1426313127172" ID="18cc8e4e8tapgbvj82m26l0nct" MODIFIED="1426313127172" TEXT="IE、Opera不支持"/></node></node><node CREATED="1426313127173" ID="5v0mfj79tsr1lluum47gsls1ic" MODIFIED="1426313127173" TEXT="主要的CSP指令"><node CREATED="1426313127173" ID="4jd2k8fdv3i464eckk4ejs6gis" MODIFIED="1426313127173" TEXT="核心"><node CREATED="1426313127173" ID="07ocjer6p4a808r8fj9ukf0629" MODIFIED="1426313127173" TEXT="让站点的所有者能针对单个页面设定可以执行哪些动作"/></node><node CREATED="1426313127173" ID="3lom5stki9v073tcl0agqrbius" MODIFIED="1426313127173" TEXT="策略位置"><node CREATED="1426313127173" ID="7alohcu6df18bl7t5mtmvqtde4" MODIFIED="1426313127173" TEXT="HTTP响应头"/><node CREATED="1426313127173" ID="38g6sehesos2ambnfg42strucl" MODIFIED="1426313127173" TEXT="嵌入到文档里"/><node CREATED="1426313127173" ID="1f4phamd6s4l2jk982l45i3pqh" MODIFIED="1426313127173" TEXT="由policy-uri设定的一个外部URL策略文件"/></node><node CREATED="1426313127173" ID="1jr8qv90mjfi7f12ssmhftr7ft" MODIFIED="1426313127173" TEXT="源"><node CREATED="1426313127173" ID="6tvn96kp45jg0s8nm4pkuh3h28" MODIFIED="1426313127173" TEXT="数量不受限制"/><node CREATED="1426313127173" ID="6nudrjqg8pb8vqhholt1qoso21" MODIFIED="1426313127173" TEXT="格式"><node CREATED="1426313127173" ID="662ja8dgf346ig46cesb9jcpk2" MODIFIED="1426313127173" TEXT="完全限定"/><node CREATED="1426313127173" ID="5ij76ruknfakk6l3l8ad70v0ah" MODIFIED="1426313127173" TEXT="通配符"/></node><node CREATED="1426313127173" ID="4feaenpff5haqp4crfi6mauk6v" MODIFIED="1426313127173" TEXT="关键字"><node CREATED="1426313127173" ID="2mt551qvrq33uo61fkscvjqbci" MODIFIED="1426313127173" TEXT="none（空集）"/><node CREATED="1426313127173" ID="7duthlgavrjfq4uvhipmb8hq7u" MODIFIED="1426313127173" TEXT="self（策略所在页的源）"/><node CREATED="1426313127173" ID="4qv8jnslck3p9sd9pd8p123ie7" MODIFIED="1426313127173" TEXT="data:（由完全内嵌的data:URL指向的策略文件）"/></node></node><node CREATED="1426313127173" ID="58l971nrapn0cmp6qre20a2ihd" MODIFIED="1426313127173" TEXT="可控制"><node CREATED="1426313127173" ID="6cml0lmfg8it8m9favh0rcq5ph" MODIFIED="1426313127173" TEXT="脚本执行"><node CREATED="1426313127173" ID="7k3gv6dsge15fbvrkfsufdh3js" MODIFIED="1426313127173" TEXT="script-src"/><node CREATED="1426313127173" ID="3u0dhqrprved8iljokglu0iuno" MODIFIED="1426313127173" TEXT="设定允许哪些URL对应的JS代码，一般不允许页面直接嵌入JS脚本"/></node><node CREATED="1426313127173" ID="075vsoqimep2icsadpq9hdlu8e" MODIFIED="1426313127173" TEXT="插件内容"><node CREATED="1426313127173" ID="1j5i3b7sd3j54an51eon4s8qu7" MODIFIED="1426313127173" TEXT="object-src"/></node><node CREATED="1426313127173" ID="4ejml3t7idgjardoevijm13vgg" MODIFIED="1426313127173" TEXT="样式表和字体"><node CREATED="1426313127173" ID="7raji2888qqnqktf4h23fm2o5u" MODIFIED="1426313127173" TEXT="style-src，font-src"/><node CREATED="1426313127173" ID="5r34pjj2uh7ssg13ktpgjnftha" MODIFIED="1426313127173" TEXT="并未禁止内嵌式的style（本指令并非出于安全考虑）"/></node><node CREATED="1426313127173" ID="79c80a9en84pcsrcnobualcu1f" MODIFIED="1426313127173" TEXT="静态的多媒体内容"><node CREATED="1426313127173" ID="7ererti043kct4ha9936eeksnp" MODIFIED="1426313127173" TEXT="img-src，media-src"/><node CREATED="1426313127173" ID="6bmg7kinabg3ra372tm74in3ik" MODIFIED="1426313127173" TEXT="本指令并非出于安全考虑"/></node><node CREATED="1426313127173" ID="768htqrt5njlonol5ql207s85s" MODIFIED="1426313127173" TEXT="子框架"><node CREATED="1426313127173" ID="7v5uq81o9qutn1es64d0smc1kl" MODIFIED="1426313127174" TEXT="frame-src"/><node CREATED="1426313127174" ID="1dio5diloc9ufvtmc2vavldmti" MODIFIED="1426313127174" TEXT="子框架的页面不会继承父页面的策略设置"/></node><node CREATED="1426313127174" ID="6g4873n738drhjngmu5rq41rb1" MODIFIED="1426313127176" TEXT="默认策略"><node CREATED="1426313127176" ID="34ct506lakoo07efk2o4nho8hi" MODIFIED="1426313127176" TEXT="default-src"/></node></node><node CREATED="1426313127176" ID="5jmkr7se7shfru0iqc6phcmcd0" MODIFIED="1426313127176" TEXT="其他指令"><node CREATED="1426313127176" ID="2vblo45b86nur1ojgif9rqcvc6" MODIFIED="1426313127176" TEXT="frame-ancestors"><node CREATED="1426313127176" ID="4jhtgniat8ci8mcase8sr280k5" MODIFIED="1426313127176" TEXT="设定当前页面能接受哪些父级页面，消除点击劫持"/><node CREATED="1426313127177" ID="3aiubr1i68qmjbgf1mkd9dg534" MODIFIED="1426313127177" TEXT="独立于其他CSP指令之外"/><node CREATED="1426313127177" ID="7ku3glmfpna2dslpe3gusqudgt" MODIFIED="1426313127177" TEXT="默认值*"/></node><node CREATED="1426313127177" ID="3m9ab4noj87807ijm0nb60ihr8" MODIFIED="1426313127177" TEXT="script-nonce"><node CREATED="1426313127177" ID="4b8p4ul36uujeh4kmgvc1p06q2" MODIFIED="1426313127177" TEXT="可以使直接放在页面里的JS代码更安全"/><node CREATED="1426313127177" ID="6an8tproa3d63n71i2ptalepjq" MODIFIED="1426313127177" TEXT="非正式指令"/></node></node></node><node CREATED="1426313127177" ID="30jgtal1d1pfg24askpiffkhmi" MODIFIED="1426313127177" TEXT="对违反策略的处理"><node CREATED="1426313127177" ID="24jhj3j9grtcouo7sv3db8ln48" MODIFIED="1426313127177" TEXT="处理"><node CREATED="1426313127177" ID="1rv0bhulm2f0t998b8ssbeeoro" MODIFIED="1426313127177" TEXT="子资源无法加载"/><node CREATED="1426313127177" ID="1981lnlqr76fj2iihi46ohju9n" MODIFIED="1426313127177" TEXT="无法执行写在文档里的JS"/><node CREATED="1426313127177" ID="1885eq43j8pl03ven2q8htmhdi" MODIFIED="1426313127177" TEXT="禁止某些页面的显示"/></node><node CREATED="1426313127177" ID="5o2flppofsgpkk3219m1ks2b7j" MODIFIED="1426313127177" TEXT="report-uri"><node CREATED="1426313127177" ID="7n4a8tu708lliskf318h12e99f" MODIFIED="1426313127177" TEXT="允许浏览器立刻向站点所有者报告策略违背事件"/><node CREATED="1426313127177" ID="7eb8mfcjpdd5imp3eafrhv0ap9" MODIFIED="1426313127177" TEXT="柔和模式"><node CREATED="1426313127177" ID="1s4lqb51422is0ufgfotiv6cht" MODIFIED="1426313127177" TEXT="只在响应头加Security-Policy-Report-Only"/></node></node></node><node CREATED="1426313127177" ID="668qdk2fbhit8npogrpcoimuh3" MODIFIED="1426313127177" TEXT="对CSP的批评"><node CREATED="1426313127183" ID="150jt1tfv5ndgj78funtinu2mk" MODIFIED="1426313127183" TEXT="改造页面成本高，且增加了HTTP请求"/><node CREATED="1426313127184" ID="459sp9ct91km43cfn57pp5kq1r" MODIFIED="1426313127184" TEXT="基于源，所以担心其规则集粒度不够细"/><node CREATED="1426313127184" ID="08jp5cs9btqrh8p74oehl3e7id" MODIFIED="1426313127184" TEXT="攻击者可以加载一个实际上不是脚本但会被误认为脚本的文件"/></node></node><node CREATED="1426313127184" ID="5poe8fm15112d30dbd709on6vg" MODIFIED="1426313127184" TEXT="沙盒框架"><node CREATED="1426313127184" ID="5d6hhtahpdjgbvbk80nokg1qso" MODIFIED="1426313127184" TEXT="做法"><node CREATED="1426313127184" ID="49ue1n0f1gae0ikbajrjivukf4" MODIFIED="1426313127184" TEXT="对常规&lt;iframe&gt;的扩展，能让顶级页面对嵌入的子页面及其子资源设置一些额外的限制"/></node><node CREATED="1426313127184" ID="6uq1rgdrlin8donk6rknompcdh" MODIFIED="1426313127184" TEXT="支持度"><node CREATED="1426313127184" ID="5v7nru15j2aa49sokdfebbvbgl" MODIFIED="1426313127184" TEXT="Webkit"/></node><node CREATED="1426313127184" ID="6958aa2dp5cr6rokv0dtpmogqo" MODIFIED="1426313127184" TEXT="权限设置"><node CREATED="1426313127184" ID="2etivmntjieuah0da10r26jt3h" MODIFIED="1426313127184" TEXT="Allow-scripts"/><node CREATED="1426313127184" ID="7dji5h0ct2mmb7dl2ttc73o44r" MODIFIED="1426313127184" TEXT="Allow-forms"/><node CREATED="1426313127184" ID="1449ro7bcpotqr1jeqa6279tu9" MODIFIED="1426313127184" TEXT="Allow-top-navigation"><node CREATED="1426313127184" ID="1kvlgn80tpe7j1cm4em4bgatav" MODIFIED="1426313127184" TEXT="使被嵌入页面能重新操控顶级窗口的地址跳转"/></node><node CREATED="1426313127184" ID="5mmta6s3e93smq7iqjp21e7mv6" MODIFIED="1426313127184" TEXT="Allow-same-origin"><node CREATED="1426313127184" ID="0uklch2g5jfvu94hnlfsht379g" MODIFIED="1426313127184" TEXT="没有的话，会被指派给一个独一无二的随机合成源"/></node></node><node CREATED="1426313127184" ID="5jr92afl2tb98chqdom89r14qg" MODIFIED="1426313127184" TEXT="脚本、表单和跳转"><node CREATED="1426313127185" ID="5e97u8jm5s7tpurtspn52qcm21" MODIFIED="1426313127185" TEXT="只有在使用sandbox的同时禁用所有插件才有作用"/></node><node CREATED="1426313127185" ID="3sd9r23k21rvh30pu8cmbovmn6" MODIFIED="1426313127185" TEXT="合成源"><node CREATED="1426313127185" ID="7caki332jmsas7lpmoi49vtpbv" MODIFIED="1426313127185" TEXT="目的"><node CREATED="1426313127185" ID="2k11e2u2diql1ijp2i8bm9dqbb" MODIFIED="1426313127185" TEXT="既能显示一些不受信任的文档，又不能让其访问敏感数据"/></node><node CREATED="1426313127185" ID="3ckuq83ghlat8sbrl9iurijmre" MODIFIED="1426313127185" TEXT="问题"><node CREATED="1426313127185" ID="24cjjluvmfvoopf9acsdlq30st" MODIFIED="1426313127185" TEXT="如果嵌入文件的URL可预测，攻击者可能直接在新的浏览器窗口里打开该页面"><node CREATED="1426313127185" ID="39m3lcqmqgrea1sgb8fhh1bvk4" MODIFIED="1426313127185" TEXT="不完整的解决"><node CREATED="1426313127185" ID="34omenlugjvnd34dkgvm9lkue1" MODIFIED="1426313127185" TEXT="text/html-sandboxed"/></node></node><node CREATED="1426313127185" ID="7vkp3rabme7h7n3pu2e1dg4gaj" MODIFIED="1426313127185" TEXT="由于同源或同域级别的安全机制有断裂，所以合成源的概念也有问题"/></node></node></node><node CREATED="1426313127185" ID="65b0mjclg3p7v1312vfk5q83fr" MODIFIED="1426313127185" TEXT="严格传输安全"><node CREATED="1426313127185" ID="55r7d99etuq7dcn4803jhrrcp6" MODIFIED="1426313127185" TEXT="HSTS"><node CREATED="1426313127185" ID="5adjs7tq2krjudr78kkts23tr8" MODIFIED="1426313127185" TEXT="做法"><node CREATED="1426313127185" ID="7rec9lqekbis6ub7336vagid8t" MODIFIED="1426313127185" TEXT="允许任何互联网上的站点告诉浏览器，对某个特定域名请求必须使用HTTPS"/></node><node CREATED="1426313127185" ID="6pv18m3thduico2rr8f4op2ic9" MODIFIED="1426313127185" TEXT="设计思路"><node CREATED="1426313127185" ID="47uk2m4qmea42207bd8inb402p" MODIFIED="1426313127185" TEXT="用户和特定域名初次交互，应该还不会受到有效攻击，但碎时间增加，碰到攻击者的几率大大提升"/></node><node CREATED="1426313127185" ID="6m7sk6s79a4fgkvj2013v8c1qo" MODIFIED="1426313127185" TEXT="问题"><node CREATED="1426313127185" ID="0ughqnniocgc7sktqve1msp8k0" MODIFIED="1426313127185" TEXT="稍微提升DoS风险"/><node CREATED="1426313127185" ID="1dirc3018p05hkp0fnm22938tm" MODIFIED="1426313127185" TEXT="如果没有includeSubDomain标识，对Cookie保护远比预期低"/><node CREATED="1426313127185" ID="6r09gv0gajl9a7p7e8ho1a5s5m" MODIFIED="1426313127185" TEXT="对插件返回的内容没什么效果"/></node></node></node><node CREATED="1426313127185" ID="657l6sds6kji6or12h9lb5p8ab" MODIFIED="1426313127185" TEXT="隐私浏览模式"><node CREATED="1426313127185" ID="6u4s7nj45ibvoi420c58n9h8lu" MODIFIED="1426313127185" TEXT="初衷"><node CREATED="1426313127185" ID="1esh8umbrjbf59gcponsdtppnd" MODIFIED="1426313127185" TEXT="隐私浏览会话期间应该完全匿名，用户行为的任何数据都不会保留在系统里"/></node><node CREATED="1426313127185" ID="112gak3f8vdfendphhgv99ik9p" MODIFIED="1426313127185" TEXT="实际"><node CREATED="1426313127185" ID="2d9qls5q5oid05sgkuv9b53l54" MODIFIED="1426313127185" TEXT="可以有其他手段独一无二的锁定任意目标"/><node CREATED="1426313127185" ID="7p7tnl6u2rnhplb3oe6i8jj3q7" MODIFIED="1426313127185" TEXT="只适合防止对使用同一台机器的其他非技术用户的常规数据泄露"/></node></node></node><node CREATED="1426313127185" ID="3kbv26ss95st09k3g7eemp9q0j" MODIFIED="1426313127185" POSITION="right" TEXT="其他的一些进展"><node CREATED="1426313127185" ID="65g3rfds9ckm6ppk1s3ua6rf1c" MODIFIED="1426313127185" TEXT="浏览器内值得HTML净化器"><node CREATED="1426313127185" ID="3hi22pgiq97tqi1hbesodb3eh6" MODIFIED="1426313127185" TEXT="XSS解决"><node CREATED="1426313127185" ID="47q667b6bii9n972ropghg98u0" MODIFIED="1426313127185" TEXT="CSP"><node CREATED="1426313127185" ID="4345th1h69uj17bl75jtqitt5v" MODIFIED="1426313127185" TEXT="问题"><node CREATED="1426313127185" ID="592akoktnabsb5n6g1pc2ufclv" MODIFIED="1426313127185" TEXT="极大改变Web应用的写法"/></node></node><node CREATED="1426313127185" ID="6v4546js7grc6nmoqthp76j5i1" MODIFIED="1426313127185" TEXT="sandbox"><node CREATED="1426313127185" ID="04imqc47ugk6dpg6khqssdci5e" MODIFIED="1426313127185" TEXT="问题"><node CREATED="1426313127186" ID="0u3n5rm6dd68pjvpmsg9a5ct5e" MODIFIED="1426313127186" TEXT="资源要求高"/><node CREATED="1426313127186" ID="1ea26i2ac89cjhvfu65e090ds9" MODIFIED="1426313127186" TEXT="数据片段零碎时笨拙"/></node></node><node CREATED="1426313127186" ID="523r811lv0taef26s8g76ecskn" MODIFIED="1426313127186" TEXT="在浏览器里提供一个经过解析的明确无误的二进制DOM树"><node CREATED="1426313127186" ID="4lp22vfcvf3g5u1qgplho72rrk" MODIFIED="1426313127186" TEXT="从客户端限制脚本产生的HTML权限很容易"/><node CREATED="1426313127186" ID="6d3p4tgotq97dfm3is6s42re37" MODIFIED="1426313127186" TEXT="IE8的toStaticHTML(...)"><node CREATED="1426313127186" ID="3qgm2nab7b1loankmc1mbe5u52" MODIFIED="1426313127186" TEXT="简单但不灵活"/><node CREATED="1426313127186" ID="5lbkgbjebc92ufuh65nj6scdr3" MODIFIED="1426313127186" TEXT="回避了如何安全地显示由服务器提供的文档的问题"/></node></node><node CREATED="1426313127186" ID="6nsuj8t3tehlu25bibgs8givu6" MODIFIED="1426313127186" TEXT="为前端工程师提供可靠的工具，标记攻击者可能控制的字符串边界"><node CREATED="1426313127186" ID="1k25qkh7cuqkutq8s8qj4g8vfr" MODIFIED="1426313127186" TEXT="HTML5不接受，因为对XML不兼容"/></node></node></node><node CREATED="1426313127186" ID="438ibp7g4njeepgivg27gllm2f" MODIFIED="1426313127186" TEXT="XSS过滤"><node CREATED="1426313127186" ID="5rpgme0pa5t3drp0ikho8g7msn" MODIFIED="1426313127186" TEXT="IE8+和Webkit里的XSS检测逻辑"><node CREATED="1426313127186" ID="36a47c5r24qlqgjb4m05g813pq" MODIFIED="1426313127186" TEXT="可能引起其他问题"/><node CREATED="1426313127186" ID="5249br314fq8s1ich7c1cg1htf" MODIFIED="1426313127186" TEXT="误报和漏报"/><node CREATED="1426313127186" ID="2o0f0utnig8u8lml72066rvvlm" MODIFIED="1426313127186" TEXT="微软提供的自愿选择的strict拦截模式"><node CREATED="1426313127186" ID="273mr47jvmb6hq44ihhgkp1clj" MODIFIED="1426313127186" TEXT="X-XSS-Protection: 1; mode=block"/></node></node></node></node><node CREATED="1426313127186" ID="4ah32k4k1ah2qmnbe8jvgcfj15" MODIFIED="1426313127186" POSITION="left" TEXT="安全工程速查表"><node CREATED="1426313127186" ID="1knv3dqjvi4s2hgavl6730fk84" MODIFIED="1426313127186" TEXT="CORS"><node CREATED="1426313127186" ID="71apsjashhma6n6t039210fm69" MODIFIED="1426313127186" TEXT="相当安全，但容易误用"/><node CREATED="1426313127186" ID="0s7ongoecfa1k8fd2vdfl79d8t" MODIFIED="1426313127186" TEXT="避免使用非简单请求"/><node CREATED="1426313127186" ID="1ncjgjgmb4osricg79riqq22ju" MODIFIED="1426313127186" TEXT="可考虑对Origin值不在白名单的请求自动不返回Cookie头域"/><node CREATED="1426313127186" ID="004k3crb5l3v7fakc6lmv4vvpn" MODIFIED="1426313127186" TEXT="避免使用Access-Control-ALlow-Origin: *"/></node><node CREATED="1426313127186" ID="6s8jfuobnkvschj6gb4m7kcu9j" MODIFIED="1426313127186" TEXT="XDomainRequest"><node CREATED="1426313127186" ID="2juui63q7cfp75kod6uos3l86q" MODIFIED="1426313127186" TEXT="使用安全"/><node CREATED="1426313127186" ID="0phmqds8j0lkotq7ajqohajem8" MODIFIED="1426313127186" TEXT="需要限制在HTTP情况下该API使用HTTPS的源"/></node><node CREATED="1426313127186" ID="6qj879i6tu6plclcut4m037p47" MODIFIED="1426313127186" TEXT="内容安全策略"><node CREATED="1426313127186" ID="6hfkjs2o23udforvmpmm1v0c6k" MODIFIED="1426313127186" TEXT="可安全使用的深度防御机制"/><node CREATED="1426313127186" ID="706sd372k60op7oa1jvsbf8uf5" MODIFIED="1426313127186" TEXT="不要无意间混合内容"/></node><node CREATED="1426313127186" ID="47bm3drpiev4c8hj8ien3im8lr" MODIFIED="1426313127186" TEXT="沙盒框架"><node CREATED="1426313127186" ID="6l0qjh78fe599romfn4hq5et38" MODIFIED="1426313127186" TEXT="以这种方式嵌入来自其他源的页面是安全的"/><node CREATED="1426313127186" ID="1iqg4a6hptialfd51f0hv0qcq4" MODIFIED="1426313127186" TEXT="不要把同源的文件放到沙盒里"/></node><node CREATED="1426313127186" ID="6vsmvfvqg31u8i2bfddkcb6mbs" MODIFIED="1426313127186" TEXT="严格传输安全"><node CREATED="1426313127186" ID="0hg5laujhts967s5jl5m14i85h" MODIFIED="1426313127186" TEXT="可以安全使用的深度防御机制"/><node CREATED="1426313127186" ID="6pqjqug4bi28dbng2ef40oea5f" MODIFIED="1426313127186" TEXT="确保所有相关的Cookie都已经标记为secure属性"/><node CREATED="1426313127186" ID="3d2ja9uvhthhtrotk0sjtk3h17" MODIFIED="1426313127186" TEXT="在适宜的地方使用includeSubDomain"/></node><node CREATED="1426313127186" ID="388i8u9os4dos40lof96edgijr" MODIFIED="1426313127186" TEXT="toStaticHTML(...)"><node CREATED="1426313127186" ID="5u9s1dhsvjgqn6gta76oqrs76a" MODIFIED="1426313127186" TEXT="该函数是安全的，但是不支持该函数的浏览器没有替代做法"/><node CREATED="1426313127187" ID="17bpdmilojbnlfg6h577nrpevc" MODIFIED="1426313127187" TEXT="有较高几率被绕过"/></node><node CREATED="1426313127187" ID="77h5hjonkgug45cektl4sq8m8r" MODIFIED="1426313127187" TEXT="隐私浏览"><node CREATED="1426313127187" ID="52meaguh1cv5ehntqfvar4i292" MODIFIED="1426313127187" TEXT="不要依赖于该机制"/></node><node CREATED="1426313127187" ID="6vh99mskc44kc4plq0nhdt7kpb" MODIFIED="1426313127187" TEXT="XSS过滤"><node CREATED="1426313127187" ID="23h0e1oh6n2461540hupda7qj8" MODIFIED="1426313127187" TEXT="不要依赖于该机制"/><node CREATED="1426313127187" ID="3naktpp4s2bka5pgn2uvdou39p" MODIFIED="1426313127187" TEXT="应在HTTP响应头明确设定XSS-Protection"/></node></node></node></map>